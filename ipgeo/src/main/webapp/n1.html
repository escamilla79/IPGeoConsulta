<!DOCTYPE html>
<%@ page import="model.IPInfo" %>
<%@ page import="java.util.List" %>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IP Geo</title>
    <link rel="stylesheet" type="text/css" href="static/sheetstyles.css">
</head>
<body>
   <div class="container">
   
    <form action="getIPInfo" method="get">
        
        <input type="text" id="ipgeo" name="ipgeo" pattern="\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}" placeholder="Ingrese una direcciÃ³n IP">
        <button type="submit">Buscar</button>
    </form>
   </div> 
   
   <div class="contanier">
      <h2>Listado de IPs Guardadas</h2>
        <table>
            <thead>
                <tr>
                    <th>IP</th>
                    <th>City</th>
                    <th>Country</th>
                    <th>Loc</th>
                    <th>org</th>
                    <th>Postal</th>
                    <th>Timezone</th>
                    <th>Eliminar</th>
                    
                </tr>
            </thead>
            <tbody>
			       <% 
					 List<IPInfo> ipInfoList = (List<IPInfo>) request.getAttribute("ipInfoList");
			        if(ipInfoList != null) {
			            for(IPInfo ipInfo : ipInfoList) {
				    %>
				    <tr>
				        <td><%= ipInfo.getIp() %></td>
				        <td><%= ipInfo.getCity() %></td>
				        <td><%= ipInfo.getCountry() %></td>
				        <td><%= ipInfo.getLoc() %></td>
				        <td><%= ipInfo.getOrg() %></td>
				        <td><%= ipInfo.getPostal() %></td>
				        <td><%= ipInfo.getTimezone() %></td>
				        <td><a href="eliminar.jsp?id=<%= ipInfo.getId() %>">Eliminar</a></td>
				    </tr>
				    <% 
				        }
			        }
				    %>
                
            </tbody>
        </table>
   </div>
</body>
</html>
